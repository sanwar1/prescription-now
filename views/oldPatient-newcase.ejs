<!DOCTYPE html>
<html>
    <%- include('./partials/header'); %>
    <body class="bg-light">
        <%- include('./partials/nav'); %>

        <div class="container max-width: 800px;">
            <!-- Logo and Header -->
            <div class="row justify-content-center">
                <div class="col-auto">
                    <br />
                    <i
                        class="bi bi-prescription text-success"
                        style="font-size: 100px"
                    ></i>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-auto"><p class="fs-2 text">New Case</p></div>
            </div>
            <br />
            <form
                action="/cases/new"
                method="POST"
                enctype="application/x-www-form-urlencoded"
            >
                <div class="row">
                    <div class="col">
                        <p class="fs-4 text">Patient Details</p>
                    </div>
                </div>
                <!-- Patient ID: Hidden input -->
                <input
                    type="hidden"
                    name="patientID"
                    class="form-control"
                    required
                    value="<%= patient._id%>"
                />
                <!-- Patient Details -->
                <div class="row">
                    <div class="col">
                        <label for="date" class="form-label"
                            >PrescriptionDate:</label
                        >
                        <input
                            type="date"
                            name="date"
                            class="form-control"
                            required
                        /><br />
                    </div>
                    <div class="col">
                        <label for="firstName" class="form-label"
                            >First Name:</label
                        >
                        <input
                            type="text"
                            name="firstName"
                            class="form-control"
                            value="<%= patient.firstName %>"
                            readonly
                            required
                        /><br />
                    </div>
                    <div class="col">
                        <label for="lastName" class="form-label"
                            >Last Name:</label
                        >
                        <input
                            type="text"
                            name="lastName"
                            class="form-control"
                            value="<%= patient.lastName %>"
                            readonly
                            required
                        /><br />
                    </div>
                    <div class="col">
                        <label for="age" class="form-label">Age:</label>
                        <input
                            type="number"
                            name="age"
                            class="form-control"
                            value="<%= new Date().getFullYear() - patient.dateOfBirth.getFullYear() %>"
                            readonly
                            required
                        /><br />
                    </div>
                    <div class="col">
                        <label for="gender" class="form-label">Gender:</label>
                        <select
                            name="gender"
                            class="form-control"
                            value="<%= patient.gender %>"
                            required
                            style="pointer-events: none"
                            onclick="return false;"
                            onkeydown="return false;"
                        >
                            <option value="M">Male</option>
                            <option value="F">Female</option>
                            <option value="O">Other</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <label for="phone" class="form-label"
                            >Phone Number:</label
                        >
                        <input
                            type="tel"
                            id="phone"
                            name="phone"
                            class="form-control"
                            pattern="[0-9]{10}"
                            value="<%= patient.phoneNumber %>"
                            readonly
                        />
                    </div>
                    <div class="col">
                        <label for="email" class="form-label">Email:</label>
                        <input
                            type="email"
                            name="email"
                            class="form-control"
                            value="<%= patient.email %>"
                            readonly
                            required
                        />
                    </div>
                </div>
                <br />
                <%- include('./partials/prescriptionform'); %>
            </form>
        </div>
        <!-- Footer -->
        <%- include('./partials/footer'); %> <%-
        include('./partials/prescriptionscripts'); %>
        <!-- Boot Strap Scripts -->
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
            crossorigin="anonymous"
        ></script>
    </body>
</html>
